(function(t){function e(e){for(var i,r,o=e[0],c=e[1],l=e[2],d=0,p=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(i=!1)}i&&(s.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},a={app:0},s=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"03ae":function(t,e,n){"use strict";var i=n("dee4"),a=n.n(i);a.a},"4d71":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"getMusicList",(function(){return J})),n.d(i,"getLink",(function(){return W})),n.d(i,"save",(function(){return F})),n.d(i,"download",(function(){return G})),n.d(i,"getKey",(function(){return Q}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Home")],1)},r=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"page"},[n("div",{staticClass:"flex",staticStyle:{position:"relative"}},[n("div",{staticClass:"search-box center"},[n("div",{staticClass:"bg"}),n("div",{staticClass:"search"},[n("el-input",{staticStyle:{width:"725px",height:"55px"},attrs:{placeholder:"搜索音乐/MV/歌单/歌手",size:"large"},on:{focus:t.getKey,input:t.getKey,blur:t.blur},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchMusic(e)}},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchMusic},slot:"append"})],1)],1)]),t.showSearch?n("div",{staticStyle:{position:"absolute",top:"160px",left:"50%",transform:"translate(-50%, 0)","z-index":"999"}},[n("search-card",{attrs:{isRank:""===t.key,keys:t.keys},on:{keySearch:t.keySearch}})],1):t._e()]),n("div",{staticClass:"container"},[t._m(0),n("div",{staticClass:"musics"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.dataList}},[n("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),n("el-table-column",{attrs:{label:"歌曲",width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"flex-vertical-center"},[n("el-image",{staticStyle:{width:"55px",height:"55px","margin-right":"30px"},attrs:{src:e.row.pic,fit:"fit"}}),n("div",{staticClass:"center",staticStyle:{height:"55px"}},[n("span",{staticClass:"music-title"},[t._v(t._s(e.row.name))]),n("img",{staticStyle:{width:"30px",height:"16px","margin-left":"5px"},attrs:{src:"/assets/wusun.png"}}),n("img",{staticStyle:{width:"30px",height:"30px","margin-left":"5px"},attrs:{src:"/assets/mv.png"}})])],1)]}}])}),n("el-table-column",{attrs:{prop:"artist",label:"歌手",width:"120"}}),n("el-table-column",{attrs:{prop:"album",width:"200",label:"专辑"}}),n("el-table-column",{attrs:{prop:"songTimeMinutes",label:"时长"}}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-link",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",underline:!1},on:{click:function(n){return t.fastDownloadMusic(e.row.rid,e.row.name)}}},[t._v("播放 ")]),n("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(n){return t.downloadMusic(e.row)}}},[t._v("下载 ")])]}}])})],1)],1),t.page.total>0?n("div",{staticClass:"flex-reverse",staticStyle:{"margin-top":"20px"}},[n("m-pagination",{on:{refresh:t.searchMusic},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1):t._e()]),n("div",{staticClass:"player"},[n("audio",{attrs:{src:t.songSrc,id:"musicMp3",autoplay:"",controls:""}})]),n("div",{staticStyle:{height:"30px",width:"100%"}})])},c=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tabs"},[n("span",{staticClass:"result-text"},[t._v("搜索结果")]),n("div",{staticClass:"tabs-title"},[n("ul",[n("li",{staticClass:"active"},[t._v("单曲")]),n("li",[t._v("专辑")]),n("li",[t._v("MV")]),n("li",[t._v("歌单")]),n("li",[t._v("歌手")])])])])}];n("b0c0"),n("d3b7"),n("ddb0"),n("3ca3"),n("2b3d");var l=Object({NODE_ENV:"production",BASE_URL:"/"}).music_url?Object({NODE_ENV:"production",BASE_URL:"/"}).music_url:"https://music.chengfeng8.top/api",u="https://tb.xqcrm.com/api/open/auth",d="https://oauth.taobao.com/authorize?response_type=code&client_id=12686282&redirect_uri=".concat(u,"&view=web&state=short"),p={baseUrl:l,authUrl:d},f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"search-card"},[n("el-card",[t.isRank?n("div",[n("span",{staticStyle:{"font-size":"16px"}},[t._v("大家都在搜")]),n("ul",t._l(t.keys,(function(e,i){return n("li",{key:i,on:{click:function(n){return t.click(e)}}},[n("span",{class:t.textClass(i)},[t._v(t._s(i+1))]),t._v(t._s(e)+" ")])})),0)]):n("ul",t._l(t.keys,(function(e,i){return n("li",{key:i,on:{click:function(n){t.click(t.getKeyString(e))}}},[t._v(t._s(t.getKeyString(e))+" ")])})),0)])],1)},h=[],g=(n("4d63"),n("ac1f"),n("25f0"),n("466d"),{name:"SearchCard",props:{keys:{type:Array,default:function(){return[]}},isRank:{type:Boolean,default:function(){return!0}}},computed:{getKeyString:function(t){return function(t){var e=t.match(new RegExp("RELWORD=(.*?)\\s"));if(e&&e.length>1)return e[1]}}},methods:{click:function(t){this.$emit("keySearch",t)},textClass:function(t){return 0===t?"id id-0":1===t?"id id-1":2===t?"id id-2":"id id-gray"}}}),m=g,v=(n("c2b2"),n("2877")),y=Object(v["a"])(m,f,h,!1,null,"47301d15",null),b=y.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-pagination",{attrs:{"current-page":t.value.pageNo,"page-sizes":[10,20,50,100,200],"page-size":t.value.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:t.value.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},_=[],x={name:"mPagination",props:{value:Object},methods:{handleSizeChange:function(t){this.value.pageSize=t,this.value.pageNo=1,this.$emit("refresh")},handleCurrentChange:function(t){this.value.pageNo=t,this.$emit("refresh")}}},k=x,w=Object(v["a"])(k,S,_,!1,null,"90a13460",null),C=w.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"x-footer"},[n("div",{staticClass:"x-meida"},[n("div",{staticClass:"x-meida-img"},[n("img",{attrs:{src:t.footer.imgUrl}})]),n("div",{staticClass:"x-media-name"},[n("h3",[t._v(t._s(t.footer.title))]),n("h5",[t._v(t._s(t.footer.subTitle))])])]),n("div",{staticClass:"x-media-btn",on:{click:t.changeStart}},[n("audio",{attrs:{src:t.footer.songs,id:"musicMp3",autoplay:"",controls:""}}),n("img",{attrs:{src:t.isStore?t.footer.startIcon:t.footer.stopIcon}})]),n("div",{staticClass:"x-media-menu"}),n("div",{staticClass:"x-mp3-progress"},[n("div",{staticClass:"x-now-progress",style:{width:t.progress}})])])},O=[],j={props:["link"],data:function(){return{isStore:!0,progress:"0%",footer:{title:"一个旅行者和贵宾狗的故事",subTitle:"俗事杂谈论坛直播",startIcon:"./static/img/start.svg",stopIcon:"./static/img/stop.svg",imgUrl:"./static/img/header1.jpg",songs:"./static/music/aixiangsui.mp3"}}},mounted:function(){document.getElementById("musicMp3").pause(),this.changeProgress()},methods:{changeStart:function(){this.isStore=!this.isStore;var t=document.getElementById("musicMp3");this.isStore?t.pause():t.play()}}},E=j,z=Object(v["a"])(E,M,O,!1,null,null,null),P=z.exports,$={name:"HelloWorld",components:{Player:P,MPagination:C,SearchCard:b},props:{msg:String},created:function(){},methods:{blur:function(){var t=this;setTimeout((function(){t.showSearch=!1}),300)},keySearch:function(t){this.key=t,this.searchMusic()},getKey:function(){var t=this;this.showSearch=!0,this.musicService.getKey({key:this.key}).then((function(e){t.keys=e.data}))},searchMusic:function(){var t=this;this.loading=!0,this.musicService.getMusicList({key:this.key,pageNo:this.page.pageNo,pageSize:this.page.pageSize}).then((function(e){200===e.code&&(t.dataList=e.data.list,t.page.total=parseInt(e.data.total))})).finally((function(){return t.loading=!1}))},fastDownloadMusic:function(t,e){var n=this;this.musicService.getLink({rid:t}).then((function(t){n.songSrc=t.data;var e=document.getElementById("musicMp3");n.isStore?e.pause():e.play()}))},downloadMusic:function(t){var e=this;delete t.mvpayinfo,delete t.payInfo;var n=this.$loading({lock:!0,text:"服务器正在合成资源"});this.musicService.save(t).then((function(n){0===n.code?window.open(p.baseUrl+"/music/download?artist="+t.artist+"&name="+t.name):e.$message.error("服务器准备资源失败")})).finally((function(){return n.close()}))}},data:function(){return{progress:0,isStore:!0,songSrc:"",showSearch:!1,loading:!1,key:"",keys:[],dataList:[],page:{total:0,pageNo:1,pageSize:20}}}},L=$,N=(n("03ae"),Object(v["a"])(L,o,c,!1,null,null,null)),U=N.exports,I={name:"App",components:{Home:U}},K=I,R=Object(v["a"])(K,s,r,!1,null,null,null),T=R.exports,B=(n("4d71"),n("99af"),n("bc3a")),D=n.n(B),A=n("4328"),V=n.n(A);function H(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,i){D.a.get(t,{params:e}).then((function(t){n(t.data)})).catch((function(t){!1!==t&&(void 0).$message.error("服务器请求错误"),i(t)}))}))}function q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,i){D.a.post(t,e).then((function(t){n(t.data)}),(function(t){!1!==t&&(void 0).$message.error("服务器请求错误"),i(t)}))}))}D.a.defaults.timeout=5e4,D.a.defaults.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",D.a.interceptors.request.use((function(t){return t.baseURL=p.baseUrl,"post"===t.method&&(t.data=V.a.stringify(t.data)),t}),(function(t){return Promise.reject(t)})),D.a.interceptors.response.use((function(t){return t}),(function(t){reject(t)}));var J=function(t){return H("/music/list",t)},W=function(t){return H("/music/link",t)},F=function(t){return q("/music/save",t)},G=function(t){return H("/music/download",t)},Q=function(t){return H("/music/searchKey",t)},X=n("5c96"),Y=n.n(X);n("0fae");a["default"].use(Y.a),a["default"].config.productionTip=!1,a["default"].prototype.musicService=i,new a["default"]({render:function(t){return t(T)}}).$mount("#app")},af71:function(t,e,n){},c2b2:function(t,e,n){"use strict";var i=n("af71"),a=n.n(i);a.a},dee4:function(t,e,n){}});
//# sourceMappingURL=app.727e1212.js.map