(function(e){function t(t){for(var a,s,c=t[0],o=t[1],l=t[2],d=0,p=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&p.push(i[s][0]),i[s]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,c=1;c<n.length;c++){var o=n[c];0!==i[o]&&(a=!1)}a&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},i={app:0},r=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=o;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"03ae":function(e,t,n){"use strict";var a=n("dee4"),i=n.n(a);i.a},1928:function(e,t,n){"use strict";var a=n("8173"),i=n.n(a);i.a},"4d71":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"getMusicList",(function(){return A})),n.d(a,"getLink",(function(){return V})),n.d(a,"save",(function(){return B})),n.d(a,"download",(function(){return H})),n.d(a,"getKey",(function(){return q}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Home")],1)},s=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"page"},[n("div",{staticStyle:{position:"relative"}},[n("div",{staticClass:"search-box center"},[n("div",{staticClass:"bg"}),n("div",{staticClass:"search"},[n("el-input",{staticStyle:{width:"725px",height:"55px"},attrs:{placeholder:"搜索音乐/MV/歌单/歌手",size:"large"},on:{focus:e.getKey,input:e.getKey,blur:function(t){e.showSearch=!1}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMusic(t)}},model:{value:e.key,callback:function(t){e.key=t},expression:"key"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchMusic},slot:"append"})],1)],1)]),n("div",{class:e.showSearch?"search-card-show":"search-card-hidden",staticStyle:{position:"absolute",top:"160px",left:"50%",transform:"translate(-50%, 0)"}},[n("search-card",{attrs:{isRank:""===e.key,keys:e.keys},on:{keySearch:e.keySearch}})],1)]),n("div",{staticClass:"container"},[e._m(0),n("div",{staticClass:"musics"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.dataList}},[n("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),n("el-table-column",{attrs:{label:"歌曲",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"flex-vertical-center"},[n("el-image",{staticStyle:{width:"55px",height:"55px","margin-right":"30px"},attrs:{src:t.row.pic,fit:"fit"}}),n("div",{staticClass:"center",staticStyle:{height:"55px"}},[n("span",{staticClass:"music-title"},[e._v(e._s(t.row.name))]),n("img",{staticStyle:{width:"30px",height:"16px","margin-left":"5px"},attrs:{src:"/assets/wusun.png"}}),n("img",{staticStyle:{width:"30px",height:"30px","margin-left":"5px"},attrs:{src:"/assets/mv.png"}})])],1)]}}])}),n("el-table-column",{attrs:{prop:"artist",label:"歌手",width:"120"}}),n("el-table-column",{attrs:{prop:"album",width:"200",label:"专辑"}}),n("el-table-column",{attrs:{prop:"songTimeMinutes",label:"时长"}}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-link",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",underline:!1},on:{click:function(n){return e.fastDownloadMusic(t.row.rid,t.row.name)}}},[e._v("播放 ")]),n("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(n){return e.downloadMusic(t.row)}}},[e._v("下载 ")])]}}])})],1)],1),e.page.total>0?n("div",{staticClass:"flex-reverse",staticStyle:{"margin-top":"20px"}},[n("m-pagination",{on:{refresh:e.searchMusic},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1):e._e()]),n("div",{staticStyle:{height:"30px",width:"100%"}})])},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tabs"},[n("span",{staticClass:"result-text"},[e._v("搜索结果")]),n("div",{staticClass:"tabs-title"},[n("ul",[n("li",{staticClass:"active"},[e._v("单曲")]),n("li",[e._v("专辑")]),n("li",[e._v("MV")]),n("li",[e._v("歌单")]),n("li",[e._v("歌手")])])])])}];n("b0c0"),n("d3b7"),n("ddb0"),n("3ca3"),n("2b3d");var l=Object({NODE_ENV:"production",BASE_URL:"/"}).music_url?Object({NODE_ENV:"production",BASE_URL:"/"}).music_url:"https://music.chengfeng8.top/api",u="https://tb.xqcrm.com/api/open/auth",d="https://oauth.taobao.com/authorize?response_type=code&client_id=12686282&redirect_uri=".concat(u,"&view=web&state=short"),p={baseUrl:l,authUrl:d},f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"search-card"},[n("el-card",[e.isRank?n("div",[n("span",{staticStyle:{"font-size":"16px"}},[e._v("大家都在搜")]),n("ul",e._l(e.keys,(function(t,a){return n("li",{key:a,on:{click:function(n){return e.click(t)}}},[n("span",{class:e.textClass(a)},[e._v(e._s(a+1))]),e._v(e._s(t)+" ")])})),0)]):n("ul",e._l(e.keys,(function(t,a){return n("li",{key:a,on:{click:function(n){e.click(e.getKeyString(t))}}},[e._v(e._s(e.getKeyString(t))+" ")])})),0)])],1)},h=[],g=(n("4d63"),n("ac1f"),n("25f0"),n("466d"),{name:"SearchCard",props:{keys:{type:Array,default:function(){return[]}},isRank:{type:Boolean,default:function(){return!0}}},computed:{getKeyString:function(e){return function(e){var t=e.match(new RegExp("RELWORD=(.*?)\\s"));if(t&&t.length>1)return t[1]}}},methods:{click:function(e){this.$emit("keySearch",e)},textClass:function(e){return 0===e?"id id-0":1===e?"id id-1":2===e?"id id-2":"id id-gray"}}}),v=g,m=(n("1928"),n("2877")),y=Object(m["a"])(v,f,h,!1,null,"79261395",null),b=y.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-pagination",{attrs:{"current-page":e.value.pageNo,"page-sizes":[10,20,50,100,200],"page-size":e.value.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.value.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},w=[],_={name:"mPagination",props:{value:Object},methods:{handleSizeChange:function(e){this.value.pageSize=e,this.value.pageNo=1,this.$emit("refresh")},handleCurrentChange:function(e){this.value.pageNo=e,this.$emit("refresh")}}},S=_,x=Object(m["a"])(S,k,w,!1,null,"90a13460",null),C=x.exports,O={name:"HelloWorld",components:{MPagination:C,SearchCard:b},props:{msg:String},created:function(){this.searchMusic()},methods:{keySearch:function(e){this.key=e,this.searchMusic()},getKey:function(){var e=this;this.showSearch=!0,this.musicService.getKey({key:this.key}).then((function(t){e.keys=t.data}))},searchMusic:function(){var e=this;this.loading=!0,this.musicService.getMusicList({key:this.key,pageNo:this.page.pageNo,pageSize:this.page.pageSize}).then((function(t){200===t.code&&(e.dataList=t.data.list,e.page.total=parseInt(t.data.total))})).finally((function(){return e.loading=!1}))},fastDownloadMusic:function(e,t){this.musicService.getLink({rid:e}).then((function(e){window.open(e.data)}))},downloadMusic:function(e){var t=this;delete e.mvpayinfo,delete e.payInfo;var n=this.$loading({lock:!0,text:"服务器正在合成资源"});this.musicService.save(e).then((function(n){0===n.code?window.open(p.baseUrl+"/music/download?artist="+e.artist+"&name="+e.name):t.$message.error("服务器准备资源失败")})).finally((function(){return n.close()}))}},data:function(){return{showSearch:!1,loading:!1,key:"",keys:[],dataList:[],page:{total:0,pageNo:1,pageSize:20}}}},M=O,j=(n("03ae"),Object(m["a"])(M,c,o,!1,null,null,null)),z=j.exports,E={name:"App",components:{Home:z}},$=E,P=Object(m["a"])($,r,s,!1,null,null,null),L=P.exports,N=(n("4d71"),n("99af"),n("bc3a")),K=n.n(N),R=n("4328"),U=n.n(R);function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){K.a.get(e,{params:t}).then((function(e){n(e.data)})).catch((function(e){!1!==e&&(void 0).$message.error("服务器请求错误"),a(e)}))}))}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){K.a.post(e,t).then((function(e){n(e.data)}),(function(e){!1!==e&&(void 0).$message.error("服务器请求错误"),a(e)}))}))}K.a.defaults.timeout=5e4,K.a.defaults.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",K.a.interceptors.request.use((function(e){return e.baseURL=p.baseUrl,"post"===e.method&&(e.data=U.a.stringify(e.data)),e}),(function(e){return Promise.reject(e)})),K.a.interceptors.response.use((function(e){return e}),(function(e){reject(e)}));var A=function(e){return T("/music/list",e)},V=function(e){return T("/music/link",e)},B=function(e){return D("/music/save",e)},H=function(e){return T("/music/download",e)},q=function(e){return T("/music/searchKey",e)},I=n("5c96"),J=n.n(I);n("0fae");i["default"].use(J.a),i["default"].config.productionTip=!1,i["default"].prototype.musicService=a,new i["default"]({render:function(e){return e(L)}}).$mount("#app")},8173:function(e,t,n){},dee4:function(e,t,n){}});
//# sourceMappingURL=app.40002c76.js.map